<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="pageTitle">الشروق لمواد البناء - حاسبة الرسوم للمتجر</title>

    <link rel="manifest" href="./manifest.json">
    <meta name="theme-color" content="#4C8FF0">
    <link rel="apple-touch-icon" href="https://www2.0zz0.com/2025/04/29/23/183916568.png">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="icon" href="https://www2.0zz0.com/2025/04/29/23/183916568.png" type="image/png">
    <style>
        /* ==========================================================================
           1. CSS Variables & Theme Definitions
           ========================================================================== */
        :root { /* ... Variables Unchanged ... */ --font-primary: 'Tajawal', sans-serif; --clr-primary-hue: 210; --clr-primary-saturation: 75%; --clr-primary-lightness-light: 55%; --clr-primary-lightness-dark: 45%; --clr-primary-light: hsl(var(--clr-primary-hue), var(--clr-primary-saturation), var(--clr-primary-lightness-light)); --clr-primary-dark: hsl(var(--clr-primary-hue), var(--clr-primary-saturation), var(--clr-primary-lightness-dark)); --clr-primary-hover-light: hsl(var(--clr-primary-hue), var(--clr-primary-saturation), 50%); --clr-primary-hover-dark: hsl(var(--clr-primary-hue), var(--clr-primary-saturation), 40%); --clr-primary-focus-ring-light: hsla(var(--clr-primary-hue), var(--clr-primary-saturation), 50%, 0.35); --clr-primary-focus-ring-dark: hsla(var(--clr-primary-hue), var(--clr-primary-saturation), 60%, 0.4); --clr-gray-50: #f9fafb; --clr-gray-100: #f3f4f6; --clr-gray-200: #e5e7eb; --clr-gray-300: #d1d5db; --clr-gray-400: #9ca3af; --clr-gray-500: #6b7280; --clr-gray-600: #4b5563; --clr-gray-700: #374151; --clr-gray-800: #1f2937; --clr-gray-900: #111827; --clr-gray-950: #0c101b; --clr-warm-white: hsl(36, 30%, 98%); --clr-soft-beige: hsl(36, 25%, 95%); --clr-warm-border: hsl(36, 20%, 88%); --clr-success: #10b981; --clr-warning: #ef4444; --clr-success-dark: #34d399; --clr-warning-dark: #f87171; --clr-white: #ffffff; --clr-black: #000000; --font-size-xs: 0.75rem; --font-size-sm: 0.875rem; --font-size-base: 1rem; --font-size-md: 1.125rem; --font-size-lg: 1.25rem; --font-size-xl: 1.5rem; --font-size-xxl: 1.75rem; --line-height-base: 1.6; --line-height-tight: 1.3; --space-1: 0.25rem; --space-2: 0.5rem; --space-3: 0.75rem; --space-4: 1rem; --space-5: 1.25rem; --space-6: 1.5rem; --space-7: 1.75rem; --space-8: 2rem; --space-9: 2.5rem; --space-10: 3rem; --space-11: 3.5rem; --space-12: 4rem; --radius-sm: 4px; --radius-md: 8px; --radius-lg: 12px; --radius-xl: 16px; --border-width: 1px; --focus-ring-width: 3px; --shadow-color-light: rgba(90, 70, 50, 0.07); --shadow-color-md-light: rgba(90, 70, 50, 0.09); --shadow-color-lg-light: rgba(90, 70, 50, 0.11); --shadow-color-dark: rgba(0, 0, 0, 0.16); --shadow-color-md-dark: rgba(0, 0, 0, 0.25); --shadow-color-lg-dark: rgba(0, 0, 0, 0.35); --shadow-sm-light: 0 1px 2px var(--shadow-color-light); --shadow-md-light: 0 3px 5px var(--shadow-color-md-light), 0 1px 2px var(--shadow-color-light); --shadow-lg-light: 0 6px 10px var(--shadow-color-lg-light), 0 2px 4px var(--shadow-color-md-light); --shadow-sm-dark: 0 1px 2px var(--shadow-color-dark); --shadow-md-dark: 0 3px 5px var(--shadow-color-md-dark), 0 1px 2px var(--shadow-color-dark); --shadow-lg-dark: 0 6px 10px var(--shadow-color-lg-dark), 0 2px 4px var(--shadow-color-md-dark); --transition-duration: 0.25s; --transition-timing: cubic-bezier(0.4, 0, 0.2, 1); --transition-base: var(--transition-duration) var(--transition-timing); --details-animation-duration: 0.3s; --details-stagger-delay: 0.05s; }
        [data-theme="light"] { /* Theme variables */ --clr-primary-current: var(--clr-primary-light); --clr-primary-hover-current: var(--clr-primary-hover-light); --clr-primary-focus-ring-current: var(--clr-primary-focus-ring-light); --clr-bg-current: var(--clr-soft-beige); --clr-surface-current: var(--clr-warm-white); --clr-input-bg-current: var(--clr-warm-white); --clr-text-current: var(--clr-gray-900); --clr-text-muted-current: var(--clr-gray-600); --clr-border-current: var(--clr-warm-border); --clr-input-border-current: var(--clr-gray-300); --clr-input-focus-border-current: var(--clr-primary-light); --clr-success-current: var(--clr-success); --clr-warning-current: var(--clr-warning); --shadow-sm-current: var(--shadow-sm-light); --shadow-md-current: var(--shadow-md-light); --shadow-lg-current: var(--shadow-lg-light); --note-bg-current: color-mix(in srgb, var(--clr-primary-light) 5%, transparent); --note-border-current: color-mix(in srgb, var(--clr-primary-light) 20%, transparent); --viz-bar-profit-bg: hsl(var(--clr-primary-hue), 60%, 88%); --viz-bar-fee-bg: hsl(var(--clr-primary-hue), 20%, 92%); --details-bg: hsl(var(--clr-primary-hue), 20%, 96%); --separator-color: hsla(var(--clr-primary-hue), 15%, 50%, 0.15); --control-border-current: var(--clr-gray-300); --sidebar-desktop-bg: var(--clr-surface-current); --input-wrapper-bg: var(--clr-input-bg-current); --input-wrapper-border: var(--clr-input-border-current); --input-wrapper-focus-border: var(--clr-input-focus-border-current); --input-wrapper-focus-shadow: var(--clr-primary-focus-ring-light); --toggle-details-text-color: var(--clr-primary-current); --toggle-details-hover-bg: color-mix(in srgb, var(--clr-primary-light) 10%, transparent); --clear-btn-color: var(--clr-gray-600); --clear-btn-border-color: var(--clr-gray-300); --clear-btn-disabled-color: var(--clr-gray-400); --result-item-bg: color-mix(in srgb, var(--clr-surface-current) 95%, var(--clr-bg-current)); --result-item-border: var(--separator-color); --result-item-hover-bg: color-mix(in srgb, black 4%, var(--result-item-bg)); --result-item-inset-shadow: inset 0 1px 2px rgba(90, 70, 50, 0.06); --detail-calc-text-color: var(--clr-gray-700); --detail-calc-code-bg: color-mix(in srgb, var(--clr-border-current) 30%, transparent); }
        [data-theme="dark"] { /* Theme variables */ --clr-primary-current: var(--clr-primary-dark); --clr-primary-hover-current: var(--clr-primary-hover-dark); --clr-primary-focus-ring-current: var(--clr-primary-focus-ring-dark); --clr-bg-current: var(--clr-gray-950); --clr-surface-current: var(--clr-gray-900); --clr-input-bg-current: var(--clr-gray-800); --clr-text-current: var(--clr-gray-100); --clr-text-muted-current: var(--clr-gray-400); --clr-border-current: var(--clr-gray-700); --clr-input-border-current: var(--clr-gray-700); --clr-input-focus-border-current: var(--clr-primary-dark); --clr-success-current: var(--clr-success-dark); --clr-warning-current: var(--clr-warning-dark); --shadow-sm-current: var(--shadow-sm-dark); --shadow-md-current: var(--shadow-md-dark); --shadow-lg-current: var(--shadow-lg-dark); --note-bg-current: color-mix(in srgb, var(--clr-primary-dark) 15%, #00000080); --note-border-current: color-mix(in srgb, var(--clr-primary-dark) 30%, transparent); --viz-bar-profit-bg: hsl(var(--clr-primary-hue), 30%, 35%); --viz-bar-fee-bg: hsl(var(--clr-primary-hue), 20%, 25%); --details-bg: hsl(var(--clr-primary-hue), 15%, 22%); --separator-color: hsla(var(--clr-primary-hue), 10%, 80%, 0.1); --control-border-current: var(--clr-gray-600); --sidebar-desktop-bg: color-mix(in srgb, var(--clr-surface-current) 95%, black 5%); --input-wrapper-bg: var(--clr-input-bg-current); --input-wrapper-border: var(--clr-input-border-current); --input-wrapper-focus-border: var(--clr-input-focus-border-current); --input-wrapper-focus-shadow: var(--clr-primary-focus-ring-dark); --toggle-details-text-color: var(--clr-primary-current); --toggle-details-hover-bg: color-mix(in srgb, var(--clr-primary-dark) 15%, transparent); --clear-btn-color: var(--clr-gray-400); --clear-btn-border-color: var(--clr-gray-700); --clear-btn-disabled-color: var(--clr-gray-600); --result-item-bg: color-mix(in srgb, var(--clr-surface-current) 95%, var(--clr-bg-current)); --result-item-border: var(--separator-color); --result-item-hover-bg: color-mix(in srgb, var(--clr-primary-current) 6%, var(--result-item-bg)); --result-item-inset-shadow: inset 0 1px 3px hsla(0, 0%, 0%, 0.25); --detail-calc-text-color: var(--clr-text-muted-current); --detail-calc-code-bg: color-mix(in srgb, var(--clr-border-current) 40%, transparent); }

        /* ==========================================================================
           2. Base & Reset Styles
           ========================================================================== */
        *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; font-size: 100%; -webkit-tap-highlight-color: transparent; height: 100%; }
        body { font-family: var(--font-primary); background: var(--clr-bg-current); color: var(--clr-text-current); min-height: 100%; display: flex; flex-direction: column; transition: background var(--transition-base), color var(--transition-base); line-height: var(--line-height-base); font-size: var(--font-size-base); overflow-x: hidden; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
        img { max-width: 100%; height: auto; display: block; vertical-align: middle; }
        svg { width: 1em; height: 1em; display: block; }
        button { background: none; border: none; padding: 0; margin: 0; font: inherit; color: inherit; cursor: pointer; text-align: inherit; -webkit-appearance: none; appearance: none;}
        input[type="text"] { font-family: inherit; font-size: inherit; line-height: inherit; color: inherit; border: none; background-color: transparent; padding: 0; border-radius: 0; -webkit-appearance: none; appearance: none; outline: none; }

        /* ==========================================================================
           3. Utility Classes
           ========================================================================== */
        .visually-hidden { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border-width: 0; }

        /* ==========================================================================
           4. Animations
           ========================================================================== */
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideInUp { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
        *:focus-visible { transition: box-shadow 0.15s ease-out; }
        @keyframes detailRowSlideIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        /* No value update animation */

        /* ==========================================================================
           5. Layout Structure
           ========================================================================== */
        .page-wrapper { position: relative; width: 100%; flex-grow: 1; display: flex; flex-direction: column; animation: fadeIn 0.5s var(--transition-timing); min-height: 100vh; }
        .main-container { width: 100%; max-width: 1440px; margin: var(--space-6) auto; padding: 0 var(--space-4); display: flex; flex-direction: column; gap: var(--space-6); margin-bottom: var(--space-8); flex-grow: 1; }
        .sidebar { flex-shrink: 0; animation: slideInUp 0.5s var(--transition-timing) 0.1s backwards; animation-play-state: paused; }
        .main-content-area { flex-grow: 1; min-width: 0; animation: slideInUp 0.5s var(--transition-timing) 0.2s backwards; animation-play-state: paused; display: flex; flex-direction: column; }
        .page-footer {
            text-align: center;
            padding: var(--space-3) var(--space-4) var(--space-5); /* Adjusted padding */
            margin-top: auto;
            font-size: var(--font-size-sm);
            color: var(--clr-text-muted-current);
            border-top: var(--border-width) solid var(--clr-border-current);
            background: var(--clr-surface-current);
            transition: background var(--transition-base), border-color var(--transition-base), color var(--transition-base);
            flex-shrink: 0;
        }

        /* ==========================================================================
           6. Sidebar Components
           ========================================================================== */
        .sidebar { background: var(--clr-surface-current); padding: var(--space-3); border-radius: var(--radius-lg); box-shadow: var(--shadow-md-current); border: var(--border-width) solid var(--clr-border-current); transition: background var(--transition-base), border-color var(--transition-base), box-shadow var(--transition-base); position: relative; display: flex; flex-direction: column; }
        .sidebar-header { padding-bottom: var(--space-4); margin-bottom: var(--space-4); border-bottom: var(--border-width) solid var(--clr-border-current); }
        .sidebar-logo-container { display: flex; justify-content: center; align-items: center; width: 65%; max-width: 200px; margin: 0 auto var(--space-4); padding: 0; border: none; }
        #storeLogo { height: auto; width: 100%; object-fit: contain; border-radius: var(--radius-sm); transition: transform var(--transition-base), filter var(--transition-base); }
        #storeLogo:hover { transform: scale(1.05); filter: brightness(1.1) drop-shadow(0 2px 3px rgba(0,0,0,0.1)); }
        .controls { display: flex; align-items: center; justify-content: center; gap: var(--space-2); flex-wrap: wrap; margin: 0; }
        [dir="rtl"] .controls { flex-direction: row-reverse; }
        .control-btn { padding: var(--space-2); border: var(--border-width) solid var(--control-border-current); border-radius: var(--radius-md); background: transparent; color: var(--clr-text-muted-current); cursor: pointer; transition: transform var(--transition-base), box-shadow var(--transition-base), background-color var(--transition-base), border-color var(--transition-base), color var(--transition-base); font-size: var(--font-size-sm); font-weight: 500; display: inline-flex; align-items: center; justify-content: center; gap: var(--space-2); white-space: nowrap; min-width: 2.5rem; height: 2.5rem; position: relative; }
        .control-btn .btn-icon-wrapper { display: inline-flex; align-items: center; justify-content: center; width: 1.4em; height: 1.4em; }
        .control-btn .btn-icon-wrapper > svg { width: 100%; height: 100%; object-fit: contain; fill: none; stroke: currentColor; }
        .control-btn .btn-text { display: inline; font-weight: 500; }
        .control-btn:hover { border-color: var(--clr-primary-current); color: var(--clr-primary-current); background: color-mix(in srgb, var(--clr-primary-current) 8%, transparent); transform: translateY(-2px) scale(1.03); box-shadow: var(--shadow-sm-current); }
        .control-btn:active { transform: translateY(0px) scale(0.97); background: color-mix(in srgb, var(--clr-primary-current) 12%, transparent); }
        .control-btn:focus-visible { outline: none; border-color: var(--clr-primary-current); box-shadow: 0 0 0 var(--focus-ring-width) var(--clr-primary-focus-ring-current); }
        #btnShareWhatsapp .btn-icon-wrapper img { border-radius: 4px; }
        #btn-lang .btn-icon-wrapper { width: 1.2em; height: 1.2em; }
        #btn-lang .lang-text { font-weight: 500; }

        .sidebar-content-wrapper { display: flex; flex-direction: column; align-items: center; gap: var(--space-4); margin: 0; padding: 0; border: none; }
        .sidebar-title { font-size: var(--font-size-lg); font-weight: 700; color: var(--clr-primary-current); text-align: center; margin: 0 0 var(--space-1) 0; line-height: var(--line-height-tight); width: 100%; }
        label[for="price"] { display: block; text-align: center; font-size: var(--font-size-sm); font-weight: 500; color: var(--clr-text-muted-current); margin-bottom: var(--space-2); transition: color var(--transition-base); pointer-events: none; width: 100%; }
        .input-wrapper { position: relative; width: 100%; max-width: 420px; margin-inline: auto; display: grid; grid-template-columns: 1fr auto; gap: 0; align-items: stretch; background-color: var(--input-wrapper-bg); border: var(--border-width) solid var(--input-wrapper-border); border-radius: var(--radius-lg); transition: border-color var(--transition-base), box-shadow var(--transition-base); box-shadow: var(--shadow-sm-current) inset; overflow: hidden; }
        .input-wrapper:focus-within { border-color: var(--input-wrapper-focus-border); box-shadow: 0 0 0 var(--focus-ring-width) var(--input-wrapper-focus-shadow), var(--shadow-sm-current) inset; }
        .input-wrapper input#price { grid-column: 1 / 2; width: 100%; padding-block: var(--space-3); padding-inline: var(--space-4); font-size: var(--font-size-lg); font-weight: 700; line-height: var(--line-height-base); border: none; background: transparent; outline: none; text-align: center; color: var(--clr-text-current); border-radius: var(--radius-lg) 0 0 var(--radius-lg); [dir="rtl"] & { border-radius: 0 var(--radius-lg) var(--radius-lg) 0; } }
        .input-wrapper input#price::placeholder { color: var(--clr-text-muted-current); opacity: 0.6; font-weight: 400; }
        #btnClear { grid-column: 2 / 3; position: relative; inset: auto; flex-shrink: 0; width: 3.2rem; height: auto; padding: 0 var(--space-2); font-size: 1rem; background: transparent; border: none; border-radius: 0; color: var(--clear-btn-color); cursor: pointer; line-height: 0; display: flex; align-items: center; justify-content: center; border-inline-start: var(--border-width) solid var(--input-wrapper-border); opacity: 1; visibility: visible; transform: scale(1); transition: color var(--transition-base), background-color var(--transition-base), transform var(--transition-base), opacity var(--transition-base), border-color var(--transition-base); user-select: none; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; }
        #btnClear svg { width: 1.15em; height: 1.15em; margin: 0; pointer-events: none; fill: none; stroke: currentColor; stroke-width: 1.5; }
        #btnClear:disabled { opacity: 0.4; cursor: not-allowed; background-color: transparent !important; color: var(--clear-btn-disabled-color); transform: scale(1); border-inline-start-color: var(--input-wrapper-border); }
        #btnClear:not(:disabled):hover { color: var(--clr-primary-current); background-color: color-mix(in srgb, var(--clr-primary-current) 10%, transparent); }
        #btnClear:not(:disabled):active { background-color: color-mix(in srgb, var(--clr-primary-current) 18%, transparent); transform: scale(0.95); }
        #btnClear:not(:disabled):focus-visible { color: var(--clr-primary-current); outline: none; box-shadow: inset 0 0 0 2px var(--clr-primary-focus-ring-current); background-color: color-mix(in srgb, var(--clr-primary-current) 5%, transparent); }
        [data-theme="dark"] #btnClear { border-inline-start-color: var(--clr-gray-700); }
        [data-theme="dark"] #btnClear:disabled { color: var(--clr-gray-600); border-inline-start-color: var(--clr-gray-700); }
        [data-theme="dark"] #btnClear:not(:disabled):hover { background-color: color-mix(in srgb, var(--clr-primary-current) 15%, var(--input-wrapper-bg)); }
        [data-theme="dark"] #btnClear:not(:disabled):active { background-color: color-mix(in srgb, var(--clr-primary-current) 25%, var(--input-wrapper-bg)); }
        [data-theme="dark"] #btnClear:not(:disabled):focus-visible { background-color: color-mix(in srgb, var(--clr-primary-current) 10%, var(--input-wrapper-bg)); }

        /* Fee Options Styling - Redesigned for better aesthetics and compactnes
